jQuery((function(a){"use strict";var e=a("body"),t=a(document).find("#yith-ywrq-table-list"),i=document.location.href;if(t.length>0&&ywraq_frontend.raq_table_refresh_check&&a.post(i,(function(e){if(""!==e){var t=a("<div></div>").html(e).find("#yith-ywrq-table-list");a("#yith-ywrq-table-list").html(t.html()),a(document).trigger("ywraq_table_reloaded")}})),e.hasClass("single-product")){var r=a(document).find(".near-add-to-cart"),n=a(document).find(".woocommerce-variation-add-to-cart");r.length>0&&n.length>0&&n.append(r);var d=a('[name|="product_id"]'),o=d.val(),s=a(".add-to-quote-"+o).find("a"),_=s.parents(".yith-ywraq-add-to-quote"),l=a('[name|="variation_id"]');l.on("change",(function(){""===a(this).val()?s.parent().hide().removeClass("show"):a.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:"action=yith_ywraq_action&ywraq_action=variation_exist&variation_id="+l.val()+"&product_id="+d.val()+"&_wpnonce="+ywraq_frontend.yith_ywraq_action_nonce,success:function(e){!0===e.result?(s.parent().hide().removeClass("show"),0==a(".yith_ywraq_add_item_browse-list-"+d.val()).length&&(_.append('<div class="yith_ywraq_add_item_response-'+d.val()+' yith_ywraq_add_item_response_message">'+e.message+"</div>"),_.append('<div class="yith_ywraq_add_item_browse-list-'+d.val()+' yith_ywraq_add_item_browse_message"><a href="'+e.rqa_url+'">'+e.label_browse+"</a></div>"))):(a(".yith_ywraq_add_item_response-"+d.val()).remove(),a(".yith_ywraq_add_item_browse-list-"+d.val()).remove(),s.parent().show().addClass("show"))}})}))}a(document).on("click",".add-request-quote-button",(function(e){e.preventDefault();var t=a(this),i=t.parents(".yith-ywraq-add-to-quote"),r="ac",n=null,d=null;t.parents("ul.products").length>0?(n=t.parents("li.product").find('input[name="add-to-cart"]'),d=t.parents("li.product").find('input[name="product_id"]')):(n=t.parents(".product").find('input[name="add-to-cart"]'),d=t.parents(".product").find('input[name="product_id"]')),(n.length>0&&d.length>0||a(".cart").length>0)&&(r=a(".cart").serialize()),(r+="&action=yith_ywraq_action&ywraq_action=add_item&product_id="+t.data("product_id")+"&_wpnonce="+ywraq_frontend.yith_ywraq_action_nonce).indexOf("add-to-cart")>0&&(r=r.replace("add-to-cart","yith-add-to-cart")),a.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:r,beforeSend:function(){t.siblings(".ajax-loading").css("visibility","visible")},complete:function(){t.siblings(".ajax-loading").css("visibility","hidden")},success:function(a){if("true"==a.result||"exists"==a.result)if("yes"===ywraq_frontend.go_to_the_list)window.location.href=a.rqa_url;else{t.parent().hide().removeClass("show").addClass("addedd");var e=void 0===d.val()?"":"-"+d.val();i.append('<div class="yith_ywraq_add_item_response'+e+' yith_ywraq_add_item_response_message">'+a.message+"</div>"),i.append('<div class="yith_ywraq_add_item_browse-list'+e+' yith_ywraq_add_item_browse_message"><a href="'+a.rqa_url+'">'+a.label_browse+"</a></div>")}else"false"==a.result&&i.append('<div class="yith_ywraq_add_item_response-'+d.val()+'">'+a.message+"</div>")}})})),a(document).on("click",".yith-ywraq-item-remove",(function(e){e.preventDefault();var t,i=a(this),r=i.data("remove-item");a("#yith-ywraq-form");t="action=yith_ywraq_action&ywraq_action=remove_item&key="+i.data("remove-item")+"&_wpnonce="+ywraq_frontend.yith_ywraq_action_nonce+"&product_id="+i.data("product_id"),a.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:t,beforeSend:function(){i.siblings(".ajax-loading").css("visibility","visible")},complete:function(){i.siblings(".ajax-loading").css("visibility","hidden")},success:function(e){1===e&&(a("[data-remove-item='"+r+"']").parents(".cart_item").remove(),0===a(".cart_item").length&&(a("#yith-ywraq-form, #yith-ywraq-mail-form, .yith-ywraq-mail-form-wrapper").remove(),a("#yith-ywraq-message").text(ywraq_frontend.no_product_in_list)))}})})),a(document).find(".theme-yith-proteo.yith-request-a-quote-page .woocommerce-message").removeAttr("role")}));